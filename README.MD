# @docamz/json-tokenizer

Lightweight and symmetric JSON tokenizer for compression and optimization.
Generates consistent dictionaries and supports reversible tokenization.
Can be used standalone or with MessagePack or Gzip for enhanced compression.

---

### ğŸš€ Install

```bash
npm install @docamz/json-tokenizer

```

### ğŸ”§ Usage

#### Create a dictionary

If you have a predefined set of keys, you can create a dictionary as follows:
Create a text file `dictionnaries/dict.txt` with the following content:

```text
name
age
city
```

#### Generate dictionary from keys

```typescript
import * as fs from "fs";
import * as path from "path";
import { generateDictionary } from "@yourname/json-tokenizer";

// Load keys from a file or define them directly
const keysPath = path.join(__dirname, "dictionnaries/dict.txt");
const name = "myDict-v1";

// Example keys file content:
const keys = fs.readFileSync(keysPath, 'utf-8').split(/\r?\n/).filter(Boolean);

// Generate dictionary
const dict = generateDictionary(keys);

//write dictionary to files
const outputPath = path.join(__dirname, `${name}.dictionary.json`);
fs.writeFileSync(outputPath, JSON.stringify(dictionary, null, 2), 'utf-8');

```

#### Tokenize and detokenize JSON

```typescript
import * as fs from "fs";
import * as path from "path";
import { tokenize, detokenize } from "@yourname/json-tokenizer";

const dictPath = path.join(__dirname, './dictionnaries/core-v1.dictionary.json');
const raw = fs.readFileSync(dictPath, 'utf-8');
const dict = JSON.parse(raw) as Dictionary;

// Example data to tokenize
const data     = { name: "Alice", age: 30, city: "Paris" };
const encoded  = tokenize(data, dict.forward);
const decoded  = detokenize(encoded, dict.reverse);

console.log(encoded); // { a: 'Alice', b: 30, c: 'Paris' }
console.log(decoded); // { name: 'Alice', age: 30, city: 'Paris' }
```

### API

| Function                        | Description                      |
| ------------------------------- | -------------------------------- |
| `generateDictionary(keys)`      | Generate a reversible dictionary |
| `tokenize(obj, dict.forward)`   | Replace JSON keys with tokens    |
| `detokenize(obj, dict.reverse)` | Restore original JSON keys       |

### Benchmarks

ğŸ“˜ Benchmarking model1.json...
  â€¢ Raw: 83.8 KB | Gzip: 6.9 KB
  â€¢ Tokenized: 29.6 KB | +gzip: 3.1 KB
  â€¢ MsgPack: 33.3 KB | +gzip: 4.0 KB
  â€¢ Tok+Msg: 19.9 KB | +gzip: 3.1 KB
  â€¢ Encode/Decode (Tok): 0.45 / 0.54 ms
  â€¢ Encode/Decode (Msg): 1.30 / 0.81 ms
  â€¢ Encode/Decode (Tok+Msg): 0.19 / 0.24 ms
  â€¢ Symmetry: âœ…

ğŸ“˜ Benchmarking model2.json...
  â€¢ Raw: 134.4 KB | Gzip: 7.5 KB
  â€¢ Tokenized: 46.0 KB | +gzip: 3.6 KB
  â€¢ MsgPack: 51.9 KB | +gzip: 4.6 KB
  â€¢ Tok+Msg: 30.7 KB | +gzip: 3.3 KB
  â€¢ Encode/Decode (Tok): 0.49 / 0.60 ms
  â€¢ Encode/Decode (Msg): 0.34 / 0.36 ms
  â€¢ Encode/Decode (Tok+Msg): 0.18 / 0.21 ms
  â€¢ Symmetry: âœ…

ğŸ“˜ Benchmarking model3.json...
  â€¢ Raw: 148.7 KB | Gzip: 7.4 KB
  â€¢ Tokenized: 49.3 KB | +gzip: 3.2 KB
  â€¢ MsgPack: 55.5 KB | +gzip: 4.1 KB
  â€¢ Tok+Msg: 32.6 KB | +gzip: 3.1 KB
  â€¢ Encode/Decode (Tok): 0.26 / 0.35 ms
  â€¢ Encode/Decode (Msg): 0.27 / 0.30 ms
  â€¢ Encode/Decode (Tok+Msg): 0.18 / 0.22 ms
  â€¢ Symmetry: âœ…

ğŸ“˜ Benchmarking model4.json...
  â€¢ Raw: 33.1 KB | Gzip: 3.5 KB
  â€¢ Tokenized: 10.0 KB | +gzip: 1.9 KB
  â€¢ MsgPack: 11.9 KB | +gzip: 2.7 KB
  â€¢ Tok+Msg: 5.9 KB | +gzip: 1.9 KB
  â€¢ Encode/Decode (Tok): 0.08 / 0.12 ms
  â€¢ Encode/Decode (Msg): 0.22 / 0.12 ms
  â€¢ Encode/Decode (Tok+Msg): 0.06 / 0.09 ms
  â€¢ Symmetry: âœ…

ğŸ“Š Summary Table:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ Model       â”‚ Rawâ†’Tok % â”‚ Tok+Gzip % â”‚ MsgPack % â”‚ Tok+Msg % â”‚ Tok+Msg+Gzip % â”‚ Tok Enc (ms) â”‚ Tok Dec (ms) â”‚ Msg Enc (ms) â”‚ Msg Dec (ms) â”‚ Tok+Msg Enc (ms) â”‚ Tok+Msg Dec (ms) â”‚ Coverage â”‚ Sym â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ model1.json â”‚ 64.6      â”‚ 55.5       â”‚ 60.3      â”‚ 76.3      â”‚ 55.5           â”‚ 0.4          â”‚ 0.5          â”‚ 1.3          â”‚ 0.8          â”‚ 0.2              â”‚ 0.2              â”‚ 100.0%   â”‚ âœ…  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ model2.json â”‚ 65.7      â”‚ 51.8       â”‚ 61.3      â”‚ 77.2      â”‚ 55.7           â”‚ 0.5          â”‚ 0.6          â”‚ 0.3          â”‚ 0.4          â”‚ 0.2              â”‚ 0.2              â”‚ 100.0%   â”‚ âœ…  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ model3.json â”‚ 66.9      â”‚ 56.5       â”‚ 62.7      â”‚ 78.0      â”‚ 57.4           â”‚ 0.3          â”‚ 0.3          â”‚ 0.3          â”‚ 0.3          â”‚ 0.2              â”‚ 0.2              â”‚ 100.0%   â”‚ âœ…  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ model4.json â”‚ 69.9      â”‚ 45.6       â”‚ 64.1      â”‚ 82.2      â”‚ 46.2           â”‚ 0.1          â”‚ 0.1          â”‚ 0.2          â”‚ 0.1          â”‚ 0.1              â”‚ 0.1              â”‚ 100.0%   â”‚ âœ…  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

ğŸ“ˆ Averages:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index)          â”‚ Values  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Rawâ†’Tok (%)      â”‚ '66.78' â”‚
â”‚ Tok+Gzip (%)     â”‚ '52.36' â”‚
â”‚ MsgPack (%)      â”‚ '62.11' â”‚
â”‚ Tok+Msg (%)      â”‚ '78.42' â”‚
â”‚ Tok+Msg+Gzip (%) â”‚ '53.68' â”‚
â”‚ Tok Enc (ms)     â”‚ '0.32'  â”‚
â”‚ Tok Dec (ms)     â”‚ '0.40'  â”‚
â”‚ Msg Enc (ms)     â”‚ '0.53'  â”‚
â”‚ Msg Dec (ms)     â”‚ '0.40'  â”‚
â”‚ Tok+Msg Enc (ms) â”‚ '0.15'  â”‚
â”‚ Tok+Msg Dec (ms) â”‚ '0.19'  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### ğŸ“„ License

MIT License Â© 2025 DocAmz
